<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>æ–‡ç« æœç´¢</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background: #f7f7f7;
        }
        .search-box {
            margin-bottom: 20px;
        }
        .search-box input {
            padding: 8px;
            width: 250px;
            border: 1px solid #ccc;
            border-radius: 5px;
        }
        .article-list {
            display: grid;
            grid-template-columns: 1fr;
            gap: 10px;
        }
        .article-card {
            background: #fff;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .pagination {
            margin-top: 20px;
            text-align: center;
        }
        .pagination button {
            margin: 0 5px;
            padding: 6px 12px;
            border: none;
            background: #007BFF;
            color: #fff;
            border-radius: 4px;
            cursor: pointer;
        }
        .pagination button:disabled {
            background: #ccc;
            cursor: not-allowed;
        }
    </style>
</head>
<body>
<h2>ğŸ” æ–‡ç« æœç´¢</h2>
<div class="search-box">
    <input type="text" id="searchInput" placeholder="è¾“å…¥å…³é”®å­—æœç´¢...">
</div>

<div class="article-list" id="articleList"></div>

<div class="pagination">
    <button id="prevBtn">ä¸Šä¸€é¡µ</button>
    <span id="pageInfo"></span>
    <button id="nextBtn">ä¸‹ä¸€é¡µ</button>
</div>

<script>
    // æ¨¡æ‹Ÿæ–‡ç« æ•°æ®
    // const articles = [
    //     {title: "Spring å…¥é—¨æ•™ç¨‹", content: "è®²è§£ Spring çš„ IoC å’Œ AOP"},
    //     {title: "Java åŸºç¡€è¯­æ³•", content: "å˜é‡ã€å¾ªç¯ã€é¢å‘å¯¹è±¡"},
    //     {title: "å‰ç«¯å¼€å‘æŒ‡å—", content: "HTML + CSS + JS å­¦ä¹ è·¯å¾„"},
    //     {title: "React å¿«é€Ÿä¸Šæ‰‹", content: "ç»„ä»¶åŒ–å¼€å‘ä¸çŠ¶æ€ç®¡ç†"},
    //     {title: "æ•°æ®åº“ä¼˜åŒ–æŠ€å·§", content: "ç´¢å¼•ã€äº‹åŠ¡ã€é”æœºåˆ¶"},
    //     {title: "ç®—æ³•å…¥é—¨", content: "æ’åºã€æŸ¥æ‰¾ã€å›¾è®ºåŸºç¡€"},
    //     {title: "Linux å¸¸ç”¨å‘½ä»¤", content: "æ–‡ä»¶æ“ä½œä¸è¿›ç¨‹ç®¡ç†"},
    //     {title: "Docker æ•™ç¨‹", content: "å®¹å™¨ä¸å¾®æœåŠ¡"},
    //     {title: "Vue3 å…¥é—¨", content: "ç»„åˆå¼ API ä¸å“åº”å¼åŸç†"},
    //     {title: "æ“ä½œç³»ç»ŸåŸç†", content: "è¿›ç¨‹ã€çº¿ç¨‹ã€å†…å­˜ç®¡ç†"},
    //     {title: "è®¡ç®—æœºç½‘ç»œ", content: "TCP/IPã€HTTPã€DNS"},
    //     {title: "Spring Boot å®æˆ˜", content: "å¿«é€Ÿå¼€å‘å¾®æœåŠ¡åº”ç”¨"}
    // ];


    const pageSize = 5;  // æ¯é¡µæ–‡ç« æ•°
    let currentPage = 1;
    let articles =[];


    async function getArticleList(page,size){

       await fetch("/article/getArticleList?page="+page+"&size="+size)
            .then(resp=>resp.json())
            .then(data=>{
                articles=data;
                console.log("åç«¯è¿”å›çš„æ•°æ®:", data, Array.isArray(data));
            })


    }



    const articleList = document.getElementById("articleList");
    const prevBtn = document.getElementById("prevBtn");
    const nextBtn = document.getElementById("nextBtn");
    const pageInfo = document.getElementById("pageInfo");
    // const searchInput = document.getElementById("searchInput");

    // æ¸²æŸ“æ–‡ç« 
   async function renderArticles() {

        articleList.innerHTML="";
        await getArticleList(currentPage,pageSize);
        articles.forEach(article => {
            const div = document.createElement("div");
            div.className = "article-card";


            div.innerHTML = `
      <h3><a href="/article/getArticle?id=${article.id}">${article.title}</a></h3>
      <p>${article.author_id}</p>
    `;
            articleList.appendChild(div);
        });

        // æ›´æ–°åˆ†é¡µä¿¡æ¯
        pageInfo.textContent = `ç¬¬ ${currentPage} é¡µ / `;

        prevBtn.disabled = currentPage === 1;
        nextBtn.disabled = articles.length!==pageSize;

    }

    // åˆ†é¡µæŒ‰é’®
    prevBtn.addEventListener("click", () => {
        if (currentPage > 1) {
            currentPage--;
            renderArticles();
        }
    });

    nextBtn.addEventListener("click", () => {
        if (articles.length ===pageSize) {
            currentPage++;
            renderArticles();
        }
    });
    //
    // // æœç´¢åŠŸèƒ½
    // searchInput.addEventListener("input", () => {
    //     const keyword = searchInput.value.toLowerCase();
    //     articles = articles.filter(a =>
    //         a.title.toLowerCase().includes(keyword) ||
    //         a.content.toLowerCase().includes(keyword)
    //     );
    //     currentPage = 1; // é‡ç½®åˆ°ç¬¬ä¸€é¡µ
    //     renderArticles();
    // });

    // åˆå§‹åŒ–æ¸²æŸ“
    renderArticles();
</script>
</body>
</html>
